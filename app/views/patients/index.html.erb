<h1 class="text-center">
  Patients
</h1>
<%= form_tag patients_path, method: :get, enforce_utf8: false do %>
  <label>Search by date</label>
  <div class="input-append date datepicker" data-date="<%= params[:start_date] %>" data-date-format="yyyy-mm-dd">
    <%= text_field_tag :start_date, params[:start_date], readonly: true %>
    <span class="add-on"><i class="icon-th"></i></span>
  </div>
  <div class="input-append date datepicker" data-date="<%= params[:end_date] %>" data-date-format="yyyy-mm-dd">
    <%= text_field_tag :end_date, params[:end_date], readonly: true %>
    <span class="add-on"><i class="icon-th"></i></span>
  </div>
  <%= hidden_field_tag :search, true %>
  <% if params[:clinician_id].present? %>
    <%= hidden_field_tag :clinician_id, params[:clinician_id] %>
  <% end %>
  <%= submit_tag "Search", name: nil, class: "btn btn-primary" %>
<% end %>
<table class="table">
  <th>Clinician</th>
  <th>Token</th>
  <th>Appointment Time</th>
  <th>Created At</th>
  <% @patients.each do |patient| %>
    <tr>
      <td><%= patient.user.name %></td>
      <td><%= patient.token %></td>
      <td><%= patient.appointment_time.in_time_zone('Eastern Time (US & Canada)').strftime("%Y-%m-%d %l:%M %p") %> EST</td>
      <td><%= patient.created_at.strftime("%Y-%m-%d") %></td>
    </tr>
  <% end %>
  <%= will_paginate @patients %>
</table>

